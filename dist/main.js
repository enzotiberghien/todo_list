(()=>{"use strict";var e={d:(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{S:()=>L,Y:()=>E});let t=JSON.parse(window.localStorage.getItem("tasks"))||[];const o=document.querySelector("#content");function n(e,t,o,n){this.title=e,this.project=t,this.dueDate=o,this.priority=n}function r(e){t=t.filter((t=>t.title!==e)),c()}function l(e,o,n,r,l){const i=t.findIndex((t=>t.title==e));t[i].title=o,t[i].project=n,t[i].dueDate=r,t[i].priority=l,c()}function c(){localStorage.setItem("tasks",JSON.stringify(t))}const i=document.querySelector("#content"),a=document.querySelector("#project-list"),s=document.querySelector("#content");function d(e){if(document.querySelectorAll(".task").forEach((t=>{e.trim()!==t.querySelector(".task-project").textContent?t.style.display="none":t.style.display="flex"})),document.querySelector("#project-page"))document.querySelector("#project-page h1").textContent=e;else{let o=document.createElement("div");o.id="project-page",o.innerHTML=`<h1>${e}</h1><i class="fa-solid fa-trash delete-btn" id="delete-project">`,s.prepend(o),o.querySelector("i").addEventListener("click",(()=>{!function(e){u=u.filter((t=>t.title!==e.trim())),y(),document.querySelectorAll(".project").forEach((t=>{t.textContent===e&&t.remove()})),function(e){t=t.filter((t=>t.project!==e.trim())),c()}(e),console.log(t)}(e),document.querySelectorAll(".task").forEach((t=>{t.querySelector(".task-project").textContent===e.trim()&&t.remove()})),E()}))}}let u=JSON.parse(window.localStorage.getItem("projects"))||[];const p=document.querySelector("#project-list");function m(e){this.title=e}function y(){localStorage.setItem("projects",JSON.stringify(u))}document.querySelector("#content"),document.querySelector("#content"),u.forEach((e=>{let t=document.createElement("h3");t.setAttribute("class","project"),t.innerHTML=`<i class="fa-solid fa-list-check"></i> ${e.title}`,a.prepend(t)})),t.forEach((e=>{let t=document.createElement("div");t.setAttribute("class","task"),t.innerHTML=`\n        <div class="task-priority"></div>\n            <div class="task-left">\n                <input type="checkbox" name="completed" id="completed">\n            </div>\n            <div class="task-middle">\n                <h3 class="task-title">${e.title}</h3>\n                <h3 class="task-project">${e.project}</h3>\n            </div>\n            <div class="task-right">\n                <h3 class="task-date">${e.dueDate}</h3>\n                <i class="fa-solid fa-pen-to-square edit-btn"></i>\n                <i class="fa-solid fa-trash delete-btn"></i>\n            </div>\n        </div>`;const o=t.querySelector(".task-priority");switch(e.priority){case"1":o.style.backgroundColor="red";break;case"2":o.style.backgroundColor="orange";break;case"3":o.style.backgroundColor="green";break;case"4":o.style.backgroundColor="blue"}i.appendChild(t)})),i.insertAdjacentHTML("beforeend",'\n        <h2 id="add-task-btn"><i class="fa-solid fa-circle-plus"></i> Add Task</h2>\n        <form action="#" class="add-task-form" id="task-form">\n            <input type="text" placeholder="Title" id="title-form" required>\n            <input type="text" placeholder="Project" id="project-task-form" required>\n            <input type="date" name="dueDate-form" id="dueDate-form" required>\n            <select name="priority-form" id="priority-form" required>\n                <option value="1">1</option>\n                <option value="2">2</option>\n                <option value="3">3</option>\n                <option value="4">4</option>\n            </select>\n            <button type="submit">Add</button>\n            <button id="form-task-cancel">Cancel</button>\n        </form>\n    ');const f=document.querySelector("#task-form"),k=document.querySelector("#project-form"),v=document.querySelector("#add-project-btn"),q=document.querySelector("#add-task-btn"),S=document.querySelector("#form-task-cancel"),h=document.querySelector("#form-project-cancel");document.querySelector("#content"),document.querySelectorAll(".delete-btn"),document.querySelectorAll(".edit-btn");let b=document.querySelectorAll(".task");const x=document.querySelector("#tasks"),j=document.querySelector("#today"),g=document.querySelector("#upcoming"),C=document.querySelectorAll(".project");function E(){b=document.querySelectorAll(".task"),document.querySelector("#project-page")&&document.querySelector("#project-page").remove(),b.forEach((e=>e.style.display="flex"))}function D(e,t){e.style.display="flex",t.style.display="none"}function L(e,t){const o=e.querySelector(".task-priority");switch(t){case"1":o.style.backgroundColor="red";break;case"2":o.style.backgroundColor="orange";break;case"3":o.style.backgroundColor="green";break;case"4":o.style.backgroundColor="blue"}}x.addEventListener("click",(()=>{E()})),f.addEventListener("submit",(e=>{e.preventDefault();const i=f.elements["title-form"].value,a=f.elements["project-task-form"].value,s=f.elements["dueDate-form"].value;let d=f.elements["priority-form"];d=d.options[d.selectedIndex].value,function(e,i,a,s){t.push(new n(e,i,a,s)),c();let d=document.createElement("div");d.setAttribute("class","task"),d.innerHTML=`\n        <div class="task-priority"></div>\n            <div class="task-left">\n                <input type="checkbox" name="completed" id="completed">\n            </div>\n            <div class="task-middle">\n                <h3 class="task-title">${e}</h3>\n                <h3 class="task-project">${i}</h3>\n            </div>\n            <div class="task-right">\n                <h3 class="task-date">${a}</h3>\n                <i class="fa-solid fa-pen-to-square edit-btn"></i>\n                <i class="fa-solid fa-trash delete-btn"></i>\n            </div>\n        </div>`,L(d,s),d.querySelector(".delete-btn").addEventListener("click",(()=>{r(d.querySelector(".task-title").textContent),d.remove()})),d.querySelector(".edit-btn").addEventListener("click",(()=>{const e=document.createElement("form");e.setAttribute("class","add-task-form"),e.id="task-form";const t=d.querySelector(".task-title"),o=d.querySelector(".task-title").textContent,n=d.querySelector(".task-project"),r=d.querySelector(".task-date");d.querySelector(".task-priority"),e.innerHTML=`\n            <input type="text" placeholder="Title" id="title-form" value="${t.textContent}" required>\n            <input type="text" placeholder="Project" id="project-form" value="${n.textContent}" required>\n            <input type="date" name="dueDate-form" id="dueDate-form" value="${r.textContent}" required>\n            <select name="priority-form" id="priority-form" required>\n                <option value="1">1</option>\n                <option value="2">2</option>\n                <option value="3">3</option>\n                <option value="4">4</option>\n            </select>\n            <button type="submit">Add</button>\n            <button id="form-task-cancel">Cancel</button>`,e.style.display="flex",d.replaceWith(e),e.addEventListener("submit",(c=>{c.preventDefault(),t.textContent=e.elements["title-form"].value,n.textContent=e.elements["project-form"].value,r.textContent=e.elements["dueDate-form"].value;let i=e.elements["priority-form"];i=i.options[i.selectedIndex].value,L(d,i),l(o,e.elements["title-form"].value,e.elements["project-form"].value,e.elements["dueDate-form"].value,i),e.replaceWith(d)}))})),o.querySelector("h1")?o.querySelector("h1").after(d):o.prepend(d)}(i,a,s,d),q.style.display="block",f.style.display="none"})),q.addEventListener("click",(()=>D(f,q))),S.addEventListener("click",(()=>D(q,f))),b.forEach((e=>{e.querySelector("#completed").addEventListener("click",(()=>{const t=e.querySelector(".task-title");"line-through"!==t.style.textDecoration?(t.style.textDecoration="line-through",e.style.opacity="0.5"):(t.style.textDecoration="none",e.style.opacity="1")})),e.querySelector(".delete-btn").addEventListener("click",(()=>{r(e.querySelector(".task-title").textContent),e.remove()})),e.querySelector(".edit-btn").addEventListener("click",(()=>{const t=document.createElement("form");t.setAttribute("class","add-task-form"),t.id="task-form";const o=e.querySelector(".task-title"),n=e.querySelector(".task-title").textContent,r=e.querySelector(".task-project"),c=e.querySelector(".task-date");t.innerHTML=`\n            <input type="text" placeholder="Title" id="title-form" value="${o.textContent}" required>\n            <input type="text" placeholder="Project" id="project-form" value="${r.textContent}" required>\n            <input type="date" name="dueDate-form" id="dueDate-form" value="${c.textContent}" required>\n            <select name="priority-form" id="priority-form" required>\n                <option value="1">1</option>\n                <option value="2">2</option>\n                <option value="3">3</option>\n                <option value="4">4</option>\n            </select>\n            <button type="submit">Add</button>\n            <button id="form-task-cancel">Cancel</button>`,t.style.display="flex",e.replaceWith(t),t.addEventListener("submit",(i=>{i.preventDefault(),e.querySelector(".task-priority"),o.textContent=t.elements["title-form"].value,r.textContent=t.elements["project-form"].value,c.textContent=t.elements["dueDate-form"].value;let a=t.elements["priority-form"];a=a.options[a.selectedIndex].value,L(e,a),l(n,t.elements["title-form"].value,t.elements["project-form"].value,t.elements["dueDate-form"].value,a),t.replaceWith(e)}))}))})),v.addEventListener("click",(()=>D(k,v))),h.addEventListener("click",(()=>D(v,k))),k.addEventListener("submit",(e=>{e.preventDefault(),function(e){u.push(new m(e)),y();let t=document.createElement("h3");t.setAttribute("class","project"),t.innerHTML=`<i class="fa-solid fa-list-check"></i> ${e}`,t.addEventListener("click",(()=>{E(),d(t.textContent)})),p.prepend(t)}(k.elements["title-project"].value),v.style.display="block",k.style.display="none"})),C.forEach((e=>{e.addEventListener("click",(()=>{E(),d(e.textContent)}))})),j.addEventListener("click",(()=>{E(),document.querySelectorAll(".task").forEach((e=>{(new Date).getDate()!==new Date(e.querySelector(".task-date").textContent).getDate()?e.style.display="none":e.style.display="flex"}))})),g.addEventListener("click",(()=>{E(),document.querySelectorAll(".task").forEach((e=>{(new Date).getTime()>=new Date(e.querySelector(".task-date").textContent).getTime()?e.style.display="none":e.style.display="flex"}))}))})();